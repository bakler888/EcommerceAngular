import{a as I}from"./chunk-MHGHNYLU.js";import{a as D,b as F,c as R,d as G,h as M,i as V,j,k as P,m as U}from"./chunk-BOMYFMUW.js";import"./chunk-KESCHGJR.js";import{c as q,d as B}from"./chunk-OBAEAT6E.js";import{c as N,u as k,v as A}from"./chunk-I7SXIN4Q.js";import{Ab as T,Bb as S,Ib as d,Jb as f,Kb as x,Qb as L,Ra as n,Tb as E,Wb as w,Xb as y,aa as h,da as b,hb as p,jb as _,nb as u,rb as r,sb as o,tb as C}from"./chunk-YJBPNNV7.js";var $=(e,t)=>({"is-valid":e,"is-invalid":t});function z(e,t){e&1&&(r(0,"p",12),d(1," email is required"),o())}function H(e,t){e&1&&(r(0,"p",12),d(1," write a valid email"),o())}function J(e,t){if(e&1&&(r(0,"div",5),p(1,z,2,0,"p",12)(2,H,2,0),o()),e&2){let s,l=S();n(),u(1,(s=l.loginForm.get("email"))!=null&&s.getError("required")?1:(s=l.loginForm.get("email"))!=null&&s.getError("email")?2:-1)}}function K(e,t){e&1&&(r(0,"p",12),d(1," password is required"),o())}function O(e,t){e&1&&(r(0,"p",12),d(1," password should be more strong "),o())}function Q(e,t){if(e&1&&(r(0,"div",5),p(1,K,2,0,"p",12)(2,O,2,0),o()),e&2){let s,l=S();n(),u(1,(s=l.loginForm.get("password"))!=null&&s.getError("required")?1:(s=l.loginForm.get("password"))!=null&&s.getError("pattern")?2:-1)}}function W(e,t){e&1&&(r(0,"span"),C(1,"i",13),o())}function X(e,t){if(e&1&&(r(0,"p",11),d(1),o()),e&2){let s=S();n(),f(s.msgerror)}}var me=(()=>{let t=class t{constructor(){this._Router=h(k),this._FormBuilder=h(P),this._AuthService=h(I),this.msgerror="",this.isloading=!1,this.loginForm=this._FormBuilder.group({email:[null,[F.required,F.email]],password:[null,[F.required,F.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isloading=!0,this._AuthService.setloginForm(this.loginForm.value).subscribe({next:l=>{console.log(l),l.message=="success"&&(localStorage.setItem("userToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])),this.isloading=!1},error:l=>{this.isloading=!1,this.msgerror=l.error.message,console.log(l)}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}};t.\u0275fac=function(v){return new(v||t)},t.\u0275cmp=b({type:t,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:24,consts:[[1,"bg-main-light","shadow","p-2","my-2","rounded-4"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","text","id","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main","ms-auto","d-block","my-2",3,"disabled"],[1,"alert","alert-danger"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(v,i){if(v&1&&(r(0,"section",0)(1,"form",1),T("ngSubmit",function(){return i.loginSubmit()}),r(2,"div",2)(3,"label",3),d(4),w(5,"translate"),o(),C(6,"input",4),p(7,J,3,1,"div",5),o(),r(8,"div",2)(9,"label",6),d(10),w(11,"translate"),o(),C(12,"input",7),p(13,Q,3,1,"div",5),o(),r(14,"div",8)(15,"a",9),d(16),o(),r(17,"button",10),d(18),w(19,"translate"),p(20,W,2,0,"span"),o()(),p(21,X,2,1,"p",11),o()()),v&2){let a,g,m,c;n(),_("formGroup",i.loginForm),n(3),f(y(5,12,"home.email")),n(2),_("ngClass",E(18,$,!((a=i.loginForm.get("email"))!=null&&a.errors)&&(((a=i.loginForm.get("email"))==null?null:a.touched)||((a=i.loginForm.get("email"))==null?null:a.dirty)),((a=i.loginForm.get("email"))==null?null:a.errors)&&(((a=i.loginForm.get("email"))==null?null:a.touched)||((a=i.loginForm.get("email"))==null?null:a.dirty)))),n(),u(7,(g=i.loginForm.get("email"))!=null&&g.errors&&((g=i.loginForm.get("email"))!=null&&g.touched||(g=i.loginForm.get("email"))!=null&&g.dirty)?7:-1),n(3),f(y(11,14,"home.password")),n(2),_("ngClass",E(21,$,!((m=i.loginForm.get("password"))!=null&&m.errors)&&(((m=i.loginForm.get("password"))==null?null:m.touched)||((m=i.loginForm.get("password"))==null?null:m.dirty)),((m=i.loginForm.get("password"))==null?null:m.errors)&&(((m=i.loginForm.get("password"))==null?null:m.touched)||((m=i.loginForm.get("password"))==null?null:m.dirty)))),n(),u(13,(c=i.loginForm.get("password"))!=null&&c.errors&&((c=i.loginForm.get("password"))!=null&&c.touched||(c=i.loginForm.get("password"))!=null&&c.dirty)?13:-1),n(3),f("Forget Password"),n(),_("disabled",i.loginForm.invalid||i.isloading),n(),x("",y(19,16,"home.login")," "),n(2),u(20,i.isloading?20:-1),n(),u(21,i.msgerror?21:-1)}},dependencies:[U,M,D,R,G,V,j,N,A,B,q]});let e=t;return e})();export{me as LoginComponent};
