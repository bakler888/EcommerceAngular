import{a as R}from"./chunk-MHGHNYLU.js";import{a as A,b as m,c as G,d as D,e as S,f as w,h as I,i as M,j as q,m as B}from"./chunk-BOMYFMUW.js";import"./chunk-KESCHGJR.js";import{c as T,d as N}from"./chunk-OBAEAT6E.js";import{u as F}from"./chunk-I7SXIN4Q.js";import{Ab as g,Bb as p,Ib as s,Jb as c,Qb as V,Ra as a,Wb as f,Xb as v,aa as y,da as b,hb as E,jb as d,na as C,nb as P,oa as _,rb as r,sb as o,tb as u,wb as x}from"./chunk-YJBPNNV7.js";function k(n,l){if(n&1){let i=x();r(0,"section")(1,"h1",0),s(2,"Forget Password"),o(),r(3,"form",1),g("ngSubmit",function(){C(i);let t=p();return _(t.verifyEmailSubmit())}),r(4,"div")(5,"label",2),s(6),f(7,"translate"),o(),u(8,"input",3),o(),r(9,"button",4),s(10),f(11,"translate"),o()()()}if(n&2){let i=p();a(3),d("formGroup",i.verifyEmail),a(3),c(v(7,4,"home.email")),a(3),d("disabled",i.verifyEmail.invalid),a(),c(v(11,6,"home.Verify Email"))}}function $(n,l){if(n&1){let i=x();r(0,"section")(1,"form",1),g("ngSubmit",function(){C(i);let t=p();return _(t.verifyCodeSubmit())}),r(2,"div",5)(3,"label",6),s(4,"Reset Code"),o(),u(5,"input",7),o(),r(6,"button",4),s(7,"Verify Code"),o()()()}if(n&2){let i=p();a(),d("formGroup",i.verifyCode),a(5),d("disabled",i.verifyCode.invalid)}}function j(n,l){if(n&1){let i=x();r(0,"section")(1,"h1",0),s(2,"Reset Password"),o(),r(3,"form",1),g("ngSubmit",function(){C(i);let t=p();return _(t.resetPasswordSubmit())}),r(4,"div")(5,"label",2),s(6),f(7,"translate"),o(),u(8,"input",8),o(),r(9,"div")(10,"label",9),s(11),f(12,"translate"),o(),u(13,"input",10),o(),r(14,"div",5)(15,"button",4),s(16,"Reset Password"),o()()()()}if(n&2){let i=p();a(3),d("formGroup",i.resetPassword),a(3),c(v(7,4,"email")),a(5),c(v(12,6,"home.newPassword")),a(4),d("disabled",i.resetPassword.invalid)}}var X=(()=>{let l=class l{constructor(){this.step=1,this._Router=y(F),this._AuthService=y(R),this.verifyEmail=new S({email:new w(null,[m.required,m.email])}),this.verifyCode=new S({resetCode:new w(null,[m.required,m.pattern(/^[0-9]{4,7}$/)])}),this.resetPassword=new S({email:new w(null,[m.required,m.email]),newPassword:new w(null,[m.required,m.pattern(/^\w{6,}$/)])})}verifyEmailSubmit(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:t=>{console.log(t),t.statusMsg==="success"&&(this.step=2)},error:t=>{console.log(t)}})}verifyCodeSubmit(){this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:e=>{console.log(e),e.status==="Success"&&(this.step=3)},error:e=>{console.log(e)}})}resetPasswordSubmit(){this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:e=>{console.log(e),localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=b({type:l,selectors:[["app-forgotpassword"]],standalone:!0,features:[V],decls:3,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"btn-main",3,"disabled"],[1,"my-2"],["for","resetCode"],["type","text","id","resetCode","formControlName","resetCode",1,"form-control"],["readonly","","type","email","id","email","formControlName","email",1,"form-control"],["for","newPassword"],["type","newPassword","id","newPassword","formControlName","newPassword",1,"form-control"]],template:function(t,h){t&1&&E(0,k,12,8,"section")(1,$,8,2)(2,j,17,8),t&2&&P(0,h.step===1?0:h.step===2?1:h.step===3?2:-1)},dependencies:[B,I,A,G,D,M,q,N,T]});let n=l;return n})();export{X as ForgotpasswordComponent};
